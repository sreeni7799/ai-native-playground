# Render deployment configuration
# This file defines all services to deploy on Render

services:
  # ðŸŽ“ UNIFIED EDUCATION PLATFORM (Universities + Scholarships)
  # This is the main service - combines 4,550 universities and 4,011 scholarships!
  - type: web
    name: ai-education-platform
    env: python
    region: oregon
    plan: free
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      pip install -e .
      echo "=== Verifying sklearn installation ==="
      python -c "import sklearn; print(f'sklearn version: {sklearn.__version__}')" || echo "WARNING: sklearn not available!"
      python -c "import numpy; print(f'numpy version: {numpy.__version__}')" || echo "WARNING: numpy not available!"
      echo "=== Generating datasets ==="
      python -m ai_native_playground.universities.generate_4000_data
      python -m ai_native_playground.scholarships.generate_scholarships
    startCommand: python -m uvicorn ai_native_playground.education_platform.app:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: OPENAI_API_KEY
        sync: false  # Optional: Set this in Render dashboard for LLM features
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: PYTHONPATH
        value: /opt/render/project/src

  # Weather API Service
  - type: web
    name: ai-playground-weather-api
    env: python
    region: oregon
    plan: free
    buildCommand: pip install -e .
    startCommand: uvicorn ai_native_playground.weather_api.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: OPENWEATHER_API_KEY
        sync: false  # Required: Set this in Render dashboard
      - key: PYTHON_VERSION
        value: 3.11.0

  # Reddit Sentiment Analyzer Service
  - type: web
    name: ai-playground-reddit-sentiment
    env: python
    region: oregon
    plan: free
    buildCommand: pip install -e .
    startCommand: uvicorn ai_native_playground.reddit_sentiment.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
